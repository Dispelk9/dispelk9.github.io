<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="./js/loadcomponents.js"></script>
    </head>

    <body>
        <!-- Navbar Container -->
        <div id="navbar-container"></div>
        <div class="intro-section-cs text-white text-center">
            <div class="overlay"></div>
                <div class="intro-text lineUp">
                    <h3 align="justify" class="text-center animate-documentation">IT-Manual</h3>
                    <p align="justify">
                        Imagine you lose all your knowledge, or you begin your dream job at a place without
                        any documentation. You will realize the importance of documentation. Documentation
                        does not only make everything organized - it directly affects productivity 
                        and efficiency, keeps a track of progress, identifies areas of risk, 
                        and overall ensures that everyone is on the same page.<br/>
                        So I should make one myself, my ultimate cheatsheet.<br/>
                    </p>
                </div>
        </div>

        <div class="container-sm my-4">
        <!--div class="p-3 mb-2 bg-dark text-white"-->
            <div class="row justify-content-center">
                <div class="col-lg mx-2 align-self-center">
                    <div class="my-3">
                        <div class="text-center">
                            <figure class="figure">
                                <img src="./images/cheatsheet1.jpg" class="img-fluid" alt="" srcset="">
                                <figcaption class="figure-caption">Do you get it? Source: Geek and Poke</figcaption>
                            </figure>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--/div-->
        <div class="p-3 mb-2 text-white">
            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <nav id="navbar-toc" class=" flex-column align-items-stretch p-3 sticky-top navbar-light">
                            <a class="navbar-brand">Table of Contents</a>
                            <nav class="nav nav-pills flex-column">
                              <a class="navbar-brand " href="#Docker">Docker</a>
                              <a class="navbar-brand " href="#Git">Git</a>
                              <a class="navbar-brand " href="#Vi">Vi/Vim</a>
                              <a class="navbar-brand " href="#Restic">Restic</a>
                              <a class="navbar-brand " href="#Ansible">Ansible</a>
                              <a class="navbar-brand " href="#Virsh">Virsh</a>
                              <a class="navbar-brand " href="#Postfix/Mailing">Postfix/Mailing</a>
                              <a class="navbar-brand " href="#Openssl">Openssl</a>
                              <a class="navbar-brand " href="#Misc">Miscellaneous</a>
                            </nav>
                        </nav>
                    </div>
                    <div class="col-sm" data-bs-spy="scroll" data-bs-target="#navbar-toc" data-bs-offset="0" tabindex="0">
                        <div class="row justify-content-center">
                            <div class="col-lg mx-2 align-self-center">
                                <div class="my-3">
                                    <h5 class="text-left" id="Docker">Docker</h5>
                                        <p align="justify">
                                            build new images<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>docker build -t new_images .</code><br/>
                                            </div>
                                            show docker images<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    docker images<br/>
                                                    docker image rm<br/>
                                                </code>
                                            </div>
                                            show all container<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>docker ps -a</code><br/>
                                            </div>   
                                            remove all containers<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    docker rm $(docker ps -aq)<br/>
                                                </code>
                                            </div>
                                            run existing container<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    docker start "container"<br/>
                                                    docker attach "container"<br/>
                                                </code>
                                            </div>
                                            run new container<br/>
                                            <div class="alert alert-info" role="alert">
                                                vhodeb11:latest image<br/>
                                                --rm to remove container after exit<br/>
                                                <code>
                                                    docker run --rm -h "deb11" -ti vhodeb11:latest /bin/bash<br/>
                                                </code>
                                            </div>
                                            play with a container<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    docker exec -it act_docker-db-1 psql -U postgres -d postgres<br/>
                                                    docker exec -it analytical_tools-act-app-1 /bin/bash<br/>
                                                    docker logs -f analytical_tools-act-app-1<br/>
                                                </code>
                                            </div>
                                            pkill gunicorn in docker<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    docker exec analytical_tools-act-app-1 pkill gunicorn<br/>
                                                </code>
                                            </div>
                                            docker compose stuff<br/>
                                            <div class="alert alert-info" role="alert">
                                                if volumes should be removed otherwise do not use<br/>
                                                <code>
                                                    docker-compose down --volumes<br/>
                                                    docker-compose build --no-cache<br/>
                                                    docker-compose up (-d if want to detach)<br/>
                                                </code>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Git">Git</h5>
                                        <p align="justify">
                                            see local branches<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>git branch</code><br/>
                                            </div>
                                            see remote branches<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>git branch -r</code><br/>
                                            </div>
                                            delete a remote branch<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>git push origin --delete my-branch-name</code><br/>
                                            </div>   
                                            delete a local branch<br/>
                                            <div class="alert alert-info" role="alert">
                                                note: The -d option only deletes the branch if it has already been merged.<br/>
                                                The -D option is a shortcut for --delete --force, which deletes the branch irrespective of its merged status.<br/>
                                                <code>
                                                    git branch -d my-branch-name<br/>
                                                    git branch -D my-branch-name<br/>
                                                </code>
                                            </div>
                                            change editor of git to vim<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>git config --global core.editor "vim"</code><br/>
                                            </div>
                                            check timestamp<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>git blame</code><br/>
                                            </div>
                                            amend specific commit<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    git rebase -i HEAD~3 for 3 latest commit<br/>
                                                    change to e(edit)<br/>
                                                    git commit --amend<br/>
                                                    git rebase --continue<br/>  
                                                </code>
                                            </div>
                                            undo the merge<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    git merge --abort<br/>
                                                    git reset --merge<br/>
                                                </code>
                                            </div>
                                            reset changes<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    git reset .<br/>
                                                    git restore .<br/>
                                                </code>
                                            </div>
                                            cherry pick the commits<br/>
                                            <div class="alert alert-info" role="alert">
                                                go to production -> active branch<br/>
                                                <code>
                                                    git cherry pick commit<br/>
                                                </code>
                                                commit from branch test<br/>
                                                git push to create merge request<br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Vi">Vi/Vim (incase you aren't nanoboy)</h5>
                                        <p align="justify">
                                            remove empty lines<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:g/^$/d</code><br/>
                                            </div>
                                            remove line with "text"<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:g/text/d</code><br/>
                                            </div>
                                            remove line with ./<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:g/\.\//d</code><br/>
                                            </div>
                                            remove all lines not contain foo<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:g!/foo/d</code><br/>
                                            </div>
                                            remove unwanted space in vim<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:%s/\s\+$//e</code><br/>
                                            </div>
                                            search and replace with range from line 8 to 10(Note: ^I = Tab)<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:8,10 s/search/replace/g</code><br/>
                                            </div>
                                            Add spaces at the begins of lines<br/>
                                            <div class="alert alert-info" role="alert">
                                                1.Ctr+V in to visual block then<br/>
                                                <code>:'<,'>s/^/      /</code><br/>
                                                or<br/>
                                                2.Ctr+V then shift+i then add the things you want<br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Restic">Restic</h5>
                                        <p align="justify">
                                            unblock restic<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>sudo restic unlock -r /where/the/repo -v</code><br/>
                                                if it still lock: rm all in /srv/restic/repo/lock<br/>
                                            </div>
                                            fatal error: out of memory/does not have copy function<br/>
                                            <div class="alert alert-info" role="alert">
                                                check-restic version<br/>
                                                if 0.9.4 then it should be update with self-update<br/>
                                                <code>restic self-update</code><br/>
                                            </div>
                                            pack abc: does not exist<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>restic -r /srv/restic/repo/ rebuild-index</code><br/>
                                            </div>
                                            <br/>
                                            restic backup<br/>
                                            <div class="alert alert-info" role="alert">
                                                access remote storage with sftp<br/>
                                                <code>sftp -P 22 account@storage_domain</code><br/>
                                                see file on sftp<br/>
                                                <code>
                                                    get file<br/>
                                                    !cat file<br/>
                                                </code><br/>
                                                copy the files from remote to local<br/>
                                                <code>scp -r account@storage_domain:/where/your/repo /target/repo/</code><br/>
                                                get the snapshot IPs<br/>
                                                <code>restic -r /target/repo/ snapshots</code>
                                                E.g: testing restore 1512amer locally<br/>
                                                <code>restic -r /target/repo/ restore 1512amer --target /target_restore/folder</code><br/>
                                                Restore remote server/VM<br/>
                                                <code>
                                                    ssh remote_VM<br/>
                                                    restic -r sftp:root@mainserver:/target/repo --password-file /folder/restic/password restore 1512amer --target /target_restore/folder<br/>
                                                </code>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Ansible">Ansible</h5>
                                        <p align="justify">
                                            play the book<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>ansible-playbook the_file.yml</code><br/>
                                            </div>
                                            ansible-pull<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>ansible-pull -U "URL HTTPS on repo"</code><br/>
                                            </div>
                                            create ubuntu kvm with ansible<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>ansible-pull -U https://github.com/Dispelk9/ansible-pull-docker.git kvm_initial.yml</code><br/>
                                            </div>
                                            after virsh console *new kvm*<br/>  
                                            <div class="alert alert-info" role="alert">
                                                <code>useradd vho</code><br/>
                                                <code>usermod -a -G sudo vho</code><br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Virsh">Virsh</h5>
                                        <p align="justify">
                                            Destroy the LVM<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>virsh destroy</code><br/>
                                                <code>virsh list</code><br/>
                                                <code>virsh undefine</code><br/>
                                                <code>virsh start</code><br/>
                                            </div>
                                            Get net-list<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>virsh net-list</code><br/>
                                                Show:<br/>
                                                Name<span class="tab"></span>State<span class="tab"></span>Autostart<span class="tab"></span>Persistent<br/>
                                                --------------------------------------------<br/>
                                                default<span class="tab"></span>active<span class="tab"></span>yes<span class="tab"></span>yes<br/>
                                                subnet<span class="tab"></span>active<span class="tab"></span>yes<span class="tab"></span>yes<br/>
                                            </div>
                                            get IPs list<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>virsh net-dhcp-leases (default or subnet)</code><br/>
                                            </div>
                                            See console on vm server<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>virsh start --console "name_server"</code><br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Postfix/Mailing">Postfix/Mailing</h5>
                                        <p align="justify">
                                            Bounce the mailx<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>mailq | grep mailx | awk '{print $1}' | while read i; do postsuper -d $i;done</code><br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Openssl">Openssl</h5>
                                        <p align="justify">
                                            PWS p7b to crt<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>openssl.exe pkcs7 -print_certs -in abc.p7b -out abc.crt</code><br/>
                                            </div>
                                            PWS p7b to pem<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>openssl.exe pkcs7 -print_certs -in abc.p7b -out abc.pem</code><br/>
                                            </div>
                                            Git bash openssl with req.conf<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>openssl req -out abc.csr -new -newkey rsa:4096 -sha256 -nodes -keyout abc.key -config req.conf</code><br/>
                                            </div>
                                            PWS with key using pin<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>openssl.exe pkcs12 -clcerts -nodes -in abc.p12 -out abc.pem -password pass:'your_pin' -passin pass:'your_pin'</code><br/>
                                            </div>
                                            Get server certificate on specific MX<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>openssl s_client -connect MX:25 -tls1_2 -starttls smtp</code><br/>
                                            </div>
                                            Check certificate chain of p7b<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    openssl pkcs7 -in certificate.p7b -print_certs -text
                                                </code><br/>
                                            </div>
                                            Create private Key<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    openssl genrsa -out example.key 4096
                                                </code><br/>
                                            </div>
                                            Example config.req<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    [ req ]<br/>
                                                    default_bits       = 2048<br/>
                                                    prompt             = no<br/>
                                                    default_md         = sha256<br/>
                                                    distinguished_name = req_distinguished_name<br/>
                                                    req_extensions     = req_ext<br/>

                                                    [ req_distinguished_name ]<br/>
                                                    C  = US<br/>
                                                    ST = California<br/>
                                                    L  = San Francisco<br/>
                                                    O  = My Company<br/>
                                                    OU = My Department<br/>
                                                    CN = example.com<br/>

                                                    [ req_ext ]<br/>
                                                    subjectAltName = @alt_names<br/>

                                                    [ alt_names ]<br/>
                                                    DNS.1 = example.com<br/>
                                                    DNS.2 = www.example.com<br/>
                                                    DNS.3 = api.example.com<br/>
                                                    IP.1  = 192.168.1.1<br/>
                                                    IP.2  = 10.0.0.1<br/>
                                                </code><br/>
                                            </div>
                                        </p>
                                    <h5 class="text-left" id="Misc">Misc.</h5>
                                        <p align="justify">
                                            Right click paste in vim<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>:set mouse=</code><br/>
                                            </div>
                                            find diff two files and grep the difference<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>diff -c file1 file2| grep -E '^\+ ' >> file_diff</code><br/>
                                            </div>
                                            find size all file in a folder<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>du -sh *</code><br/>
                                            </div>
                                            check diskspace<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>df -h</code><br/>
                                            </div>
                                            gen key and put public key on Gitlab<br/>
                                            note: add public_key on Gitlab<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    ssh-keygen -t 4096 -b rsa<br/>
						                            #should use password then using agent to add the private key<br/>
                                                    eval "$(ssh-agent -s)"<br/>
                                                    ssh-add private_key<br/>
                                                    git clone remote_repo<br/>
                                                </code>
                                                auto ask private key when login<br/>
                                                <code>
                                                    vi .bashrc and add these lines<br/>
                                                    #auto ssh-key<br/>
                                                    if [ ! -S ~/.ssh/ssh_auth_sock ]; then<br/>
                                                    eval `ssh-agent`<br/>
                                                    ln -sf "$SSH_AUTH_SOCK" ~/.ssh/ssh_auth_sock<br/>
                                                    fi<br/>
                                                    export SSH_AUTH_SOCK=~/.ssh/ssh_auth_sock<br/>
                                                    ssh-add -l > /dev/null || ssh-add<br/>
                                                    relogin the server<br/>
                                                </code>
                                            </div>
                                            Profiling to optimize app runtime<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>python -m cProfile pre-commit.py -s cummulative pre-commit.py</code><br/>
                                            </div>
                                            Find files<br/>
                                            <div class="alert alert-info" role="alert">
                                                note: add -delete to delete the found files<br/>
                                                <code>find . -name "*.bak" -type f</code>
                                            </div>
                                            Zip files then delete<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>find . -mtime +67 -type f | grep name_file | xargs tar -czvf zipped_file.tar --remove-files</code><br/>
                                            </div>
                                            Update APT<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    sudo apt update<br/>
                                                    sudo apt list --upgradable<br/>
                                                    sudo apt upgrade -y<br/>
                                                </code><br/>
                                            </div>
                                            Add vho to sudo<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>
                                                    sudo usermod -a -G sudo vho<br/>
                                                    groups<br/>
                                                    vi /etc/sudoers<br/>
                                                    vho ALL=(ALL:ALL) ALL<br/>
                                                </code><br/>
                                            </div>
                                            Telnet to send mail through MX<br/>
                                            <div class="alert alert-info" role="alert">
                                                <code>telnet MX 25</code><br/>
                                                <code>ehlo Domain</code><br/>
                                                <code>MAIL FROM:</code><br/>
                                                <code>RCPT TO:</code><br/>
                                                <code>MAIL FROM: sender@example.com</code><br/>
                                                <code>250 2.1.0 Sender OK</code><br/>
                                                <code>RCPT TO: recipient@example.com</code><br/>
                                                <code>250 2.1.5 Recipient OK</code><br/>
                                                <code>DATA</code><br/>
                                                <code>354 Start mail input; end with <CRLF>.<CRLF></code><br/>
                                                <code>From: sender@example.com</code><br/>
                                                <code>To: recipient@example.com</code><br/>
                                                <code>Subject: Telnet email</code><br/>
                                                <code>This is my first test message sent using the Telnet client on Windows</code><br/>
                                                <code>.</code><br/>
                                                <code>250 2.0.0 Ok: queued as ABC123456789</code><br/>
                                                <code>QUIT</code><br/>
                                                <code>221 2.0.0 Service closing transmission channel</code><br/>
                                            </div>
                                        </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container my-4 text-white">
            <footer>
                <div class="row">
                    <div class="col-md-6 item text">
                        <h3>Dispelk9 x Ai Viet Hoang</h3>
                        <p>Hanoian</p>
                        <p>Sysadmin in Germany</p>
                    </div>
                </div>
                <div class="row">
                        <div style="display: flex; align-items: center;">
                            <a href="https://www.linkedin.com/in/ai-viet-hoang-111093/" style="margin-right: 15px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
                                </svg>
                            </a>
                            <a href="https://github.com/Dispelk9">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row text-white" >
                    <p class="copyright" align="center">&copy; Copyright © Dispelk9 x AiVietHoang All Rights Reserved</p>
                </div>
            </footer>
        </div>
        <button id="btn-back-to-top" 
                style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 9999; background: rgb(46, 44, 44); color: white; padding: 10px 20px; border: none; border-radius: 5px;">
                <i class="bi bi-arrow-up"></i>
        </button>
        <!-- JavaScript: Above <body>  -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
        <script src="./js/button_scroll.js"></script> 
    </body>
</html>
